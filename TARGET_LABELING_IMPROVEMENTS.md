# Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ Target Labeling - Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ

## âœ… Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾: ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ð¾Ðµ Target Labeling

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°
- **BTCUSDT**: Ñ‚Ð¾Ð»ÑŒÐºÐ¾ 9.3% LONG + 10.2% SHORT = **19.5% Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ñ… ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð²**
- ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼ HOLD â†’ "0 ÑÐ´ÐµÐ»Ð¾Ðº" Ð² Ð±ÑÐºÑ‚ÐµÑÑ‚Ð°Ñ…
- Ð¡Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð´Ð¸ÑÐ±Ð°Ð»Ð°Ð½Ñ ÐºÐ»Ð°ÑÑÐ¾Ð² (80.5% HOLD)

### Ð ÐµÑˆÐµÐ½Ð¸Ðµ: ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð¾ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸

**ÐÐ¸Ð·ÐºÐ°Ñ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ** (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, BTCUSDT):
- `forward_periods=8` (2 Ñ‡Ð°ÑÐ° Ð²Ð¼ÐµÑÑ‚Ð¾ 75 Ð¼Ð¸Ð½ÑƒÑ‚)
- `threshold_pct=0.3%` (Ð²Ð¼ÐµÑÑ‚Ð¾ 0.5%)
- `min_profit_pct=0.3%` (Ð²Ð¼ÐµÑÑ‚Ð¾ 0.5%)

**Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**:
- `forward_periods=6` (90 Ð¼Ð¸Ð½ÑƒÑ‚)
- `threshold_pct=0.4%`
- `min_profit_pct=0.4%`

**Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ** (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, SOLUSDT):
- `forward_periods=5` (75 Ð¼Ð¸Ð½ÑƒÑ‚ - Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ)
- `threshold_pct=0.5%` (Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ)
- `min_profit_pct=0.5%` (Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ)

### ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

1. Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ÑÑ ÑÑ€ÐµÐ´Ð½ÑÑ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ (ATR %) Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 100 Ð±Ð°Ñ€Ð¾Ð²
2. ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ÑÑ Ñ€ÐµÐ¶Ð¸Ð¼ Ð²Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ (Ð½Ð¸Ð·ÐºÐ°Ñ/ÑÑ€ÐµÐ´Ð½ÑÑ/Ð²Ñ‹ÑÐ¾ÐºÐ°Ñ) Ð¿Ð¾ Ð¿ÐµÑ€Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑÐ¼ (33%, 67%)
3. Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð±Ð°Ñ€Ð° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹

### ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ

- **BTCUSDT**: +50-100% Ð±Ð¾Ð»ÑŒÑˆÐµ LONG/SHORT ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² (Ñ 19.5% Ð´Ð¾ 30-40%)
- **ETHUSDT**: +20-30% Ð±Ð¾Ð»ÑŒÑˆÐµ ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² (Ñ 34.6% Ð´Ð¾ 40-45%)
- **SOLUSDT**: Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ (ÑƒÐ¶Ðµ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ ÑÐ±Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²Ð°Ð½)

### Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

1. **`bot/ml/feature_engineering.py`**:
   - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ `use_adaptive_params=True`
   - Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° Ð»Ð¾Ð³Ð¸ÐºÐ° Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²
   - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ð¾Ð´ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° `forward_periods`, `threshold_pct`, `min_profit_pct`

2. **`retrain_ml_optimized.py`**:
   - Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ (`use_adaptive_params=True`)
   - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸

## ðŸš€ Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸

1. **ÐŸÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¼Ð¾Ð´ÐµÐ»Ð¸** Ñ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ð¼Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸:
   ```bash
   python retrain_ml_optimized.py
   ```

2. **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ¾Ð²**:
   - Ð¦ÐµÐ»ÑŒ Ð´Ð»Ñ BTCUSDT: 30-40% LONG+SHORT (Ð²Ð¼ÐµÑÑ‚Ð¾ 19.5%)
   - Ð”Ð¾ÑÑ‚Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ TP Ð´Ð¾Ð»Ð¶Ð½Ð° Ð¾ÑÑ‚Ð°Ñ‚ÑŒÑÑ >95%

3. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð±ÑÐºÑ‚ÐµÑÑ‚Ñ‹**:
   ```bash
   python backtest_ml_strategy.py
   ```

4. **Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹**:
   - ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ´ÐµÐ»Ð¾Ðº Ð´Ð¾Ð»Ð¶Ð½Ð¾ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ñ‚ÑŒÑÑ
   - ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ (Win Rate, Profit Factor) Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒÑÑ Ð¸Ð»Ð¸ Ð¾ÑÑ‚Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ñ‚Ð¾Ð¼ Ð¶Ðµ ÑƒÑ€Ð¾Ð²Ð½Ðµ

## âš ï¸ Ð’Ð°Ð¶Ð½Ð¾

- Ð”Ð¾ÑÑ‚Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ TP Ð´Ð¾Ð»Ð¶Ð½Ð° Ð¾ÑÑ‚Ð°Ñ‚ÑŒÑÑ >95% (Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ)
- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸, Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ Ñ€ÑƒÑ‡Ð½Ð¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
- Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð²ÑÐµÑ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°Ñ… (BTCUSDT, ETHUSDT, SOLUSDT)

## ðŸ“Š Ð¢ÐµÐºÑƒÑ‰Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ (Ð´Ð¾ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ð¹)

| Ð¡Ð¸Ð¼Ð²Ð¾Ð»   | LONG % | SHORT % | HOLD % | LONG+SHORT | TP % |
|----------|--------|---------|--------|------------|------|
| BTCUSDT  | 9.3%   | 10.2%   | 80.5%  | 19.5%      | 99.8% |
| ETHUSDT  | 16.8%  | 17.8%   | 65.4%  | 34.6%      | 99.9% |
| SOLUSDT  | 21.3%  | 21.7%   | 57.0%  | 43.0%      | 99.9% |

## ðŸ“ Ð¦ÐµÐ»ÐµÐ²Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ (Ð¿Ð¾ÑÐ»Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ð¹)

| Ð¡Ð¸Ð¼Ð²Ð¾Ð»   | LONG % | SHORT % | HOLD % | LONG+SHORT | TP % |
|----------|--------|---------|--------|------------|------|
| BTCUSDT  | 15-20% | 15-20%  | 60-70% | 30-40%     | >95% |
| ETHUSDT  | 18-22% | 18-22%  | 56-64% | 36-44%     | >95% |
| SOLUSDT  | 21-25% | 21-25%  | 50-58% | 42-50%     | >95% |
