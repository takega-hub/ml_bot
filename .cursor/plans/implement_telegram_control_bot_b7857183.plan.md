---
name: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Telegram —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∏—Å—Ç–æ—Ä–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏
overview: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Telegram-–±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º ML-–±–æ—Ç–æ–º, –≤–µ–¥–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏.
todos:
  - id: install-deps
    content: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ python-telegram-bot
    status: pending
  - id: update-config
    content: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Telegram –≤ bot/config.py
    status: pending
  - id: implement-state-history
    content: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è BotState (–ª–∏–º–∏—Ç 5 –ø–∞—Ä), –∏—Å—Ç–æ—Ä–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ —Å–¥–µ–ª–æ–∫ –≤ bot/state.py
    status: pending
  - id: implement-model-manager
    content: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º
    status: pending
  - id: implement-tg-bot
    content: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Telegram –±–æ—Ç–∞ (–ú–µ–Ω—é, –°—Ç–∞—Ç—É—Å –ø–æ–∑–∏—Ü–∏–π, –ò—Å—Ç–æ—Ä–∏—è)
    status: pending
  - id: implement-trading-loop
    content: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
    status: pending
  - id: create-entry-point
    content: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ run_bot.py
    status: pending
---

# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∏—Å—Ç–æ—Ä–∏–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏

–≠—Ç–æ—Ç –ø–ª–∞–Ω —Ä–∞—Å—à–∏—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –∑–∞ —Å—á–µ—Ç –≤–µ–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–∑–∏—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ML-–º–æ–¥–µ–ª–µ–π.

## 1. –û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `python-telegram-bot`.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ [`bot/config.py`](bot/config.py):
    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `TELEGRAM_TOKEN`, `ALLOWED_USER_ID`.
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π –¥–ª—è –ë–î/—Ñ–∞–π–ª–æ–≤ –∏—Å—Ç–æ—Ä–∏–∏.

## 2. –í–µ–¥–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- –°–æ–∑–¥–∞–Ω–∏–µ [`bot/state.py`](bot/state.py):
    - **BotState**: –°–ø–∏—Å–æ–∫ `active_symbols` (–¥–æ 5), —Ç–µ–∫—É—â–∏–µ –º–æ–¥–µ–ª–∏, —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã.
    - **SignalTracker**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π ML.
    - **TradeLogger**: –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫.
    - **PositionTracker**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–∫—É—â–∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π (—Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞, —Ä–∞–∑–º–µ—Ä, –º–∞—Ä–∂–∞, —Ç–µ–∫—É—â–∏–π PnL).

## 3. –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏

- –°–µ—Ä–≤–∏—Å –æ–±—É—á–µ–Ω–∏—è —Å –±—ç–∫—Ç–µ—Å—Ç-–æ—Ç—á–µ—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏ `[ ‚úÖ –ü—Ä–∏–Ω—è—Ç—å –Ω–æ–≤—É—é ] [ ‚ùå –û—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é ]`.

## 4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Telegram-–±–æ—Ç–∞

- –°–æ–∑–¥–∞–Ω–∏–µ [`bot/telegram_bot.py`](bot/telegram_bot.py):
    - **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
        - üîî **–ù–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª**: –∫–æ–≥–¥–∞ ML –≤—ã–¥–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –≤—ã—Å–æ–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.
        - üöÄ **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏**: –¥–µ—Ç–∞–ª–∏ –æ—Ä–¥–µ—Ä–∞, —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞, TP/SL.
        - üèÅ **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏**: —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–¥–µ–ª–∫–∏, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PnL.
    - **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –°—Ç–∞—Ç—É—Å (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ)**:
        –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∫–Ω–æ–ø–∫–µ –∏–ª–∏ `/status`:
        ```
        üí∞ ACCOUNT INFO:
        –ë–∞–ª–∞–Ω—Å: $1045.50 | –î–æ—Å—Ç—É–ø–Ω–æ: $200.00
        –û–±—â–∏–π PnL: -$563.31 (–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è)
        
        üìä OPEN POSITIONS:
        –°–∏–º–≤–æ–ª: BTCUSDT (10x) | Side: LONG
        –†–∞–∑–º–µ—Ä: 0.05 BTC | –ú–∞—Ä–∂–∞: $45.00
        –í—Ö–æ–¥: $65,000 | –¢–µ–∫: $65,500
        PnL: +$25.00 (+0.77%)
        TP: $67,000 | SL: $64,000
        
        üìà ACTIVE STRATEGY:
        –ü–∞—Ä–∞: BTCUSDT | –ú–æ–¥–µ–ª—å: Ensemble_v2
        –ü–∞—Ä–∞: ETHUSDT | –ú–æ–¥–µ–ª—å: XGBoost_Final
        ```
    - **–ú–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä, –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π, –∏—Å—Ç–æ—Ä–∏—è.

## 5. –¢–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª (Trading Loop)

- –°–æ–∑–¥–∞–Ω–∏–µ [`bot/trading_loop.py`](bot/trading_loop.py):
    - –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ 5 –ø–∞—Ä.
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram-–±–æ—Ç–æ–º –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏—è—Ö —á–µ—Ä–µ–∑ `BybitClient` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç—É—Å–µ.

## 6. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

- [`run_bot.py`](run_bot.py): –ó–∞–ø—É—Å–∫ Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.

```mermaid
graph TD
    User((–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)) <--> TB[Telegram Bot]
    TL[Trading Loop] -- "Notifications (Signal/Open/Close)" --> TB
    TB <--> History[(History & State)]
    History <--> TL
    TL <--> Exchange[Bybit API]
```
