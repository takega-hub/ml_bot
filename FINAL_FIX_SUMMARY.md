# –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π - 02.02.2026 (11:25 MSK)

## üéØ –¶–µ–ª—å
–£—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫–∏ rate limit API Bybit (ErrCode: 10006) –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞.

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤ (–ö—Ä–∏—Ç–∏—á–Ω–æ!)**

#### A. –¶–∏–∫–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–∑–∏—Ü–∏–π
**–ë—ã–ª–æ:** –û—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
```python
for symbol in active_symbols:
    pos = get_position_info(symbol=symbol)  # N –∑–∞–ø—Ä–æ—Å–æ–≤
```

**–°—Ç–∞–ª–æ:** –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
```python
all_positions = get_position_info(settle_coin="USDT")  # 1 –∑–∞–ø—Ä–æ—Å
for symbol in active_symbols:
    position = positions_by_symbol.get(symbol)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ ~85% (16 ‚Üí 2.4 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω)

#### B. –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
```python
for symbol in active_symbols:
    await process_symbol(symbol)
    await asyncio.sleep(2)  # 2 —Å–µ–∫ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏

#### C. –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π: 15 ‚Üí 25 —Å–µ–∫—É–Ω–¥
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞: 60 ‚Üí 120 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ò—Ç–æ–≥–æ–≤–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:** ~75% (20 ‚Üí 4-5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω)

---

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∞—à–∞ –ø—Ä–∏ rate limit**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ pybit –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ 10006 –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Bapi-Limit-Reset-Timestamp`, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–æ–≥–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí `KeyError` ‚Üí –∫—Ä–∞—à –±–æ—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥)
pip install --upgrade pybit
```

–û–±–Ω–æ–≤–ª–µ–Ω `requirements.txt`: `pybit>=5.7.0`

---

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ logger**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `bot/ml/strategy_ml.py` –±—ã–ª–æ **2 –º–µ—Å—Ç–∞** —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ `logger`:
```python
import logging
logger = logging.getLogger(__name__)  # ‚ùå –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
```

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π `logger` (—Å—Ç—Ä–æ–∫–∞ 44).

---

### 4. **–û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤**

**–£–¥–∞–ª–µ–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚ùå `[SYMBOL] Processing symbol...`
- ‚ùå `[SYMBOL] Received N candles...`
- ‚ùå `ML Prediction: ... (confidence: ...)`
- ‚ùå HTTP –∑–∞–ø—Ä–æ—Å—ã urllib3/httpx

**–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω INFO —É—Ä–æ–≤–µ–Ω—å** (–±—ã–ª–æ DEBUG)

**–û—Ç–∫–ª—é—á–µ–Ω—ã —à—É–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
```python
logging.getLogger("urllib3.connectionpool").setLevel(logging.WARNING)
logging.getLogger("httpx").setLevel(logging.WARNING)
logging.getLogger("pybit").setLevel(logging.INFO)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ~80% –º–µ–Ω—å—à–µ —Å—Ç—Ä–æ–∫ –≤ –ª–æ–≥–∞—Ö, –ª–µ–≥—á–µ —á–∏—Ç–∞—Ç—å

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–æ/–ü–æ—Å–ª–µ

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|--------|-----------|
| **API –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω** | ~20 | ~4-5 | ‚¨áÔ∏è 75% |
| **–ó–∞–ø—Ä–æ—Å—ã –ø–æ–∑–∏—Ü–∏–π** | 16/–º–∏–Ω | 2.4/–º–∏–Ω | ‚¨áÔ∏è 85% |
| **Rate limit –æ—à–∏–±–∫–∏** | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç | ‚úÖ 100% |
| **–ö—Ä–∞—à–∏ –ø—Ä–∏ 10006** | –î–∞ | –ù–µ—Ç | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **–°—Ç—Ä–æ–∫ –≤ –ª–æ–≥–∞—Ö** | 100% | ~20% | ‚¨áÔ∏è 80% |

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **bot/trading_loop.py**
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω `_position_monitoring_loop()` (–æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏ –≤ `_signal_processing_loop()`
   - –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∑–∏—Ü–∏–π (15 ‚Üí 25 —Å–µ–∫)
   - –£–¥–∞–ª–µ–Ω–æ DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **bot/config.py**
   - `live_poll_seconds`: 60 ‚Üí 120 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

3. **bot/ml/strategy_ml.py**
   - –£–¥–∞–ª–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `logger`
   - –£–¥–∞–ª–µ–Ω–æ DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

4. **run_bot.py**
   - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: DEBUG ‚Üí INFO
   - –û—Ç–∫–ª—é—á–µ–Ω—ã —à—É–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (urllib3, httpx)

5. **requirements.txt**
   - pybit: >=5.6.0 ‚Üí >=5.7.0

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ pybit (–≤–∞–∂–Ω–æ!)

```powershell
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
.\venv\Scripts\Activate.ps1

# –û–±–Ω–æ–≤–∏—Ç–µ pybit
pip install --upgrade pybit

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 5.7.0)
pip show pybit
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å:

```bash
# –¢–æ—Ä–≥—É–π—Ç–µ –º–∞–∫—Å–∏–º—É–º 1-2 –ø–∞—Ä–∞–º–∏!
ACTIVE_SYMBOLS=BTCUSDT,ETHUSDT

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ (2-4 –º–∏–Ω—É—Ç—ã)
LIVE_POLL_SECONDS=120
```

**–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:**
```bash
ACTIVE_SYMBOLS=BTCUSDT
LIVE_POLL_SECONDS=240
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```powershell
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
.\start_bot.bat

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
python run_bot.py
```

### –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

–í **–Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**:
```powershell
Get-Content logs\bot.log -Wait -Tail 20
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

**–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**

```
INFO - Starting Signal Processing Loop...
INFO - Starting Position Monitoring Loop...
INFO - [ETHUSDT] Loading model: ml_models/...
INFO - [ETHUSDT] Signal: HOLD | Reason: ... | Price: 2244.60
```

**–ù–ï –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:**
- ‚ùå `ERROR - Too many visits (ErrCode: 10006)`
- ‚ùå `ERROR - cannot access local variable 'logger'`
- ‚ùå `DEBUG - [SYMBOL] Processing symbol...` (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)
- ‚ùå `DEBUG - https://api.bybit.com:443 "GET...` (HTTP –∑–∞–ø—Ä–æ—Å—ã)

---

## üìà –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã 24/7:

```bash
# .env
ACTIVE_SYMBOLS=BTCUSDT,ETHUSDT  # –ú–∞–∫—Å–∏–º—É–º 2 –ø–∞—Ä—ã
LIVE_POLL_SECONDS=180           # 3 –º–∏–Ω—É—Ç—ã
ML_CONFIDENCE_THRESHOLD=0.6     # –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
```

**–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç:**
- ‚úÖ ~3 –∑–∞–ø—Ä–æ—Å–∞/–º–∏–Ω (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limit
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –±–µ–∑ –∫—Ä–∞—à–µ–π

---

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è

### 1. –û—à–∏–±–∫–∏ rate limit (10006) –≤—Å–µ –µ—â–µ –µ—Å—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í .env —É–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏ —É–º–µ–Ω—å—à–∏—Ç–µ –ø–∞—Ä—ã
ACTIVE_SYMBOLS=BTCUSDT
LIVE_POLL_SECONDS=300  # 5 –º–∏–Ω—É—Ç
```

### 2. –ë–æ—Ç –∫—Ä–∞—à–∏—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```powershell
# –í–µ—Ä—Å–∏—è pybit
pip show pybit
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 5.7.0, –µ—Å–ª–∏ –Ω–µ—Ç:
pip install pybit --upgrade --force-reinstall
```

### 3. –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ run_bot.py:**
```python
root_logger.setLevel(logging.INFO)  # –ù–ï DEBUG!
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **API_RATE_LIMIT_FIX.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. **CONFIG_SAFE_MODE.md** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
3. **RESTART_BOT.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
4. **start_bot.bat** - —Å–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
5. **FINAL_FIX_SUMMARY.md** - —ç—Ç–æ —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª

---

## ‚ú® –ò—Ç–æ–≥

### –ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:
- ‚úÖ Rate limit (10006) - —Å–Ω–∏–∂–µ–Ω–æ –Ω–∞ 75%
- ‚úÖ –ö—Ä–∞—à–∏ –ø—Ä–∏ 10006 - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (pybit update)
- ‚úÖ Logger –æ—à–∏–±–∫–∏ - —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –æ—á–∏—â–µ–Ω–æ

### –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 24/7
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API
- ‚úÖ –ß–∏—Å—Ç—ã–µ –∏ —á–∏—Ç–∞–µ–º—ã–µ –ª–æ–≥–∏
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

---

**–î–∞—Ç–∞:** 2026-02-02 (08:25 UTC / 11:25 MSK)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–í–µ—Ä—Å–∏—è:** Production-ready

üöÄ **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ —Ç–æ—Ä–≥—É–π—Ç–µ!**
