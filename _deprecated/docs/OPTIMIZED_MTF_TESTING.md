# üöÄ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï MTF –ö–û–ú–ë–ò–ù–ê–¶–ò–ô

## üìã –û–ë–ó–û–†

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è MTF –∫–æ–º–±–∏–Ω–∞—Ü–∏–π:

1. **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–¥–∏–Ω–æ—á–Ω—ã–µ –º–æ–¥–µ–ª–∏** (15m –∏ 1h) –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
2. **–í—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ø-N –º–æ–¥–µ–ª–µ–π** –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ composite score
3. **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–ø-–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏** (N√óN –≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö)
4. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

## ‚ö° –£–°–ö–û–†–ï–ù–ò–ï

### –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π: ~100+ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (–µ—Å–ª–∏ 10 –º–æ–¥–µ–ª–µ–π –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞)
- –í—Ä–µ–º—è: **16-25 —á–∞—Å–æ–≤**

### –ù–æ–≤—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ø-5√ó5: **25 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π**
- –í—Ä–µ–º—è: **4-6 —á–∞—Å–æ–≤**
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 4-5 —Ä–∞–∑**

## üéØ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π):

```bash
python auto_strategy_optimizer.py --symbols BTCUSDT,ETHUSDT
```

–≠—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (15m –∏ 1h) –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MTF** (—Ç–æ–ø-5√ó5 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)
4. –í—ã–±–æ—Ä –ª—É—á—à–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### –° –ø—Ä–æ–ø—É—Å–∫–æ–º –æ–±—É—á–µ–Ω–∏—è (–µ—Å–ª–∏ –º–æ–¥–µ–ª–∏ —É–∂–µ –µ—Å—Ç—å):

```bash
python auto_strategy_optimizer.py --symbols BTCUSDT,ETHUSDT --skip-training
```

### –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

```bash
python auto_strategy_optimizer.py --symbols BTCUSDT,ETHUSDT --full-mtf-testing
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–ø-–º–æ–¥–µ–ª–µ–π:

```bash
python auto_strategy_optimizer.py --symbols BTCUSDT,ETHUSDT --mtf-top-n 3
```

–≠—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç–æ–ø-3√ó3 = 9 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –≤–º–µ—Å—Ç–æ 25.

## üìä –ü–†–û–¶–ï–°–° –†–ê–ë–û–¢–´

### –≠—Ç–∞–ø 1: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- –û–±—É—á–∞–µ—Ç 15m –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
- –û–±—É—á–∞–µ—Ç 1h –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞

### –≠—Ç–∞–ø 2: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –æ–¥–∏–Ω–æ—á–Ω—ã–µ –º–æ–¥–µ–ª–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `ml_models_comparison_*.csv`
- –í—ã—á–∏—Å–ª—è–µ—Ç composite score –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MTF
1. **–í—ã–±–æ—Ä —Ç–æ–ø-–º–æ–¥–µ–ª–µ–π:**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –º–æ–¥–µ–ª–∏ –ø–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º—É (15m –∏ 1h)
   - –í—ã—á–∏—Å–ª—è–µ—Ç composite score –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
   - –í—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ø-N –º–æ–¥–µ–ª–µ–π –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π:**
   - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ N√óN –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `mtf_combinations_*.csv`

### –≠—Ç–∞–ø 4: –í—ã–±–æ—Ä –ª—É—á—à–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã MTF —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –æ–¥–∏–Ω–æ—á–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
- –í—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `best_strategies_*.json`

## üîç COMPOSITE SCORE

–§–æ—Ä–º—É–ª–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ–ø-–º–æ–¥–µ–ª–µ–π:

```
score = PnL% √ó 0.4 +
        WinRate √ó 0.2 +
        ProfitFactor √ó 20.0 √ó 0.2 +
        SharpeRatio √ó 0.1 +
        (100 - MaxDrawdown%) √ó 0.1
```

–≠—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç:
- **–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** (PnL%)
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** (Win Rate)
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** (Profit Factor)
- **–†–∏—Å–∫-–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** (Sharpe Ratio)
- **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∏—Å–∫–æ–≤** (Max Drawdown)

## üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

1. **`ml_models_comparison_*.csv`** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
2. **`mtf_combinations_*_*.csv`** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã MTF –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
3. **`best_strategies_*.json`** - –ª—É—á—à–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
4. **`optimization_*.log`** - –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

## ‚öôÔ∏è –ü–ê–†–ê–ú–ï–¢–†–´

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `--symbols` - –°–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ `state.active_symbols`)
- `--days` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)
- `--output-dir` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `optimization_results`)

### –ü—Ä–æ–ø—É—Å–∫ —ç—Ç–∞–ø–æ–≤:

- `--skip-training` - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- `--skip-comparison` - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- `--skip-mtf-testing` - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MTF –∫–æ–º–±–∏–Ω–∞—Ü–∏–π

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MTF:

- `--mtf-top-n` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ø-–º–æ–¥–µ–ª–µ–π –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
- `--full-mtf-testing` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. **–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--full-mtf-testing` —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
3. **–î–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--mtf-top-n 3` (9 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)
4. **–î–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--mtf-top-n 7` (49 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)

## üìù –ü–†–ò–ú–ï–†–´

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:

```bash
python auto_strategy_optimizer.py
```

### –ë—ã—Å—Ç—Ä–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–±–µ–∑ –æ–±—É—á–µ–Ω–∏—è):

```bash
python auto_strategy_optimizer.py --skip-training
```

### –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:

```bash
python auto_strategy_optimizer.py --symbols BTCUSDT,ETHUSDT,SOLUSDT --full-mtf-testing
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ç–æ–ø-–≤—ã–±–æ—Ä (7√ó7 = 49 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π):

```bash
python auto_strategy_optimizer.py --symbols BTCUSDT,ETHUSDT --mtf-top-n 7
```

## üîÑ –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø

–ü—Ä–æ—Ü–µ—Å—Å –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ cron/scheduler:

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–±—ã—Å—Ç—Ä–∞—è)
0 2 * * * cd /path/to/ml_bot && python auto_strategy_optimizer.py --skip-training

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
0 3 * * 0 cd /path/to/ml_bot && python auto_strategy_optimizer.py
```

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-02-14*
*–í–µ—Ä—Å–∏—è: 2.0 (–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)*
