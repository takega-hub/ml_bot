# üéØ –ü–õ–ê–ù –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò 1h –ú–û–î–ï–õ–ï–ô

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

**1h –º–æ–¥–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ö—É–¥—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –°—Ä–µ–¥–Ω–∏–π PnL%: 34.32% vs 81.80% (15m)
- –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫: 36.2 vs 86.7 (15m)
- Win Rate: 58.74% vs 58.94% (–ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ)

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. **Target Labeling –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è 1h**
–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```python
forward_periods=2        # 2 * 1h = 2 —á–∞—Å–∞ (—Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ?)
max_hold_periods=24      # 24 * 1h = 24 —á–∞—Å–∞
threshold_pct=0.3        # 0.3%
min_profit_pct=0.3       # 0.3%
min_risk_reward_ratio=1.5
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- `forward_periods=2` –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–º –¥–ª—è 1h —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞
- –î–ª—è 1h –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã
- –ü–æ—Ä–æ–≥–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–º–∏, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —à—É–º

### 2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è**
- 1h –º–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º

### 3. **–§–∏–ª—å—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**
- –§–∏–ª—å—Ç—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–º–∏ –¥–ª—è 1h
- Confidence threshold –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º

## üöÄ –ü–õ–ê–ù –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Target Labeling –¥–ª—è 1h

#### –í–∞—Ä–∏–∞–Ω—Ç A: –£–≤–µ–ª–∏—á–∏—Ç—å forward_periods
```python
forward_periods=4        # 4 * 1h = 4 —á–∞—Å–∞ (–≤–º–µ—Å—Ç–æ 2)
max_hold_periods=48      # 48 * 1h = 48 —á–∞—Å–æ–≤ (–≤–º–µ—Å—Ç–æ 24)
threshold_pct=0.5        # 0.5% (–≤–º–µ—Å—Ç–æ 0.3%)
min_profit_pct=0.5       # 0.5% (–≤–º–µ—Å—Ç–æ 0.3%)
min_risk_reward_ratio=2.0  # 2.0:1 (–≤–º–µ—Å—Ç–æ 1.5:1)
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- 1h —Ç–∞–π–º—Ñ—Ä–µ–π–º —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–Ω–∞—á–∏–º—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π
- 4 —á–∞—Å–∞ –¥–∞—é—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Ç—Ä–µ–Ω–¥–∞
- –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–µ –ø–æ—Ä–æ–≥–∏ —É–º–µ–Ω—å—à–∞—é—Ç —à—É–º

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```python
forward_periods=3        # 3 * 1h = 3 —á–∞—Å–∞ (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å)
max_hold_periods=36      # 36 * 1h = 36 —á–∞—Å–æ–≤
threshold_pct=0.4        # 0.4% (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å)
min_profit_pct=0.4       # 0.4%
min_risk_reward_ratio=1.8  # 1.8:1
```

### –≠—Ç–∞–ø 2: –£–≤–µ–ª–∏—á–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è

**–¢–µ–∫—É—â–∏–π:** 30 –¥–Ω–µ–π
**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π:** 60-90 –¥–Ω–µ–π –¥–ª—è 1h –º–æ–¥–µ–ª–µ–π

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- 1h –º–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- –ë–æ–ª—å—à–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö = –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è 1h

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è 1h:
```python
# –î–ª—è 1h –º–æ–¥–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
if model_interval == "60":  # 1h –º–æ–¥–µ–ª–∏
    confidence_threshold = 0.30  # –í–º–µ—Å—Ç–æ 0.35
    stability_filter_multiplier = 1.01  # –í–º–µ—Å—Ç–æ 1.02
    rsi_overbought = 95  # –í–º–µ—Å—Ç–æ 98
    rsi_oversold = 5     # –í–º–µ—Å—Ç–æ 2
```

### –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–î–ª—è 1h –º–æ–¥–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- Random Forest: –±–æ–ª—å—à–µ –¥–µ—Ä–µ–≤—å–µ–≤, –≥–ª—É–±–∂–µ
- XGBoost: –¥—Ä—É–≥–∏–µ learning_rate, max_depth
- LightGBM: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å num_leaves, min_data_in_leaf

### –≠—Ç–∞–ø 5: –£–ª—É—á—à–µ–Ω–∏–µ Feature Engineering

**–î–ª—è 1h –º–æ–¥–µ–ª–µ–π:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è 1h —Ñ–∏—á–∏
- –£–ª—É—á—à–∏—Ç—å MTF —Ñ–∏—á–∏ (4h, 1d)

## üìù –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ target labeling

```python
# optimize_1h_target_labeling.py
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```

### –®–∞–≥ 2: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å retrain_ml_optimized.py

–î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è 1h:
```python
if base_interval == "60":  # 1h –º–æ–¥–µ–ª–∏
    # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è 1h
    forward_periods = 4
    max_hold_periods = 48
    threshold_pct = 0.5
    min_profit_pct = 0.5
    min_risk_reward_ratio = 2.0
else:  # 15m –º–æ–¥–µ–ª–∏
    # –¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    forward_periods = 5
    max_hold_periods = 96
    threshold_pct = 0.3
    min_profit_pct = 0.3
    min_risk_reward_ratio = 1.5
```

### –®–∞–≥ 3: –£–≤–µ–ª–∏—á–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è 1h

```python
if base_interval == "60":
    days_back = 60  # –í–º–µ—Å—Ç–æ 30
else:
    days_back = 30
```

### –®–∞–≥ 4: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ strategy_ml.py

```python
def __init__(self, ...):
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–¥–µ–ª–∏
    model_interval = self._extract_interval_from_model_path(model_path)
    
    if model_interval == "60":  # 1h –º–æ–¥–µ–ª–∏
        self.confidence_threshold = 0.30
        self.stability_filter = 1.01
        # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    else:  # 15m –º–æ–¥–µ–ª–∏
        self.confidence_threshold = 0.35
        self.stability_filter = 1.02
```

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è:
1. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ PnL%** —Å 34.32% –¥–æ 50-60%
2. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–¥–µ–ª–æ–∫** —Å 36.2 –¥–æ 50-60
3. **–£–ª—É—á—à–µ–Ω–∏–µ Win Rate** –¥–æ 60-65%
4. **–£–ª—É—á—à–µ–Ω–∏–µ Sharpe Ratio**

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π, –µ—Å–ª–∏:
- PnL% 1h –º–æ–¥–µ–ª–µ–π —É–≤–µ–ª–∏—á–∏—Ç—Å—è –º–∏–Ω–∏–º—É–º –Ω–∞ 50%
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –º–∏–Ω–∏–º—É–º –Ω–∞ 30%
- Win Rate –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ 58%+ –∏–ª–∏ —É–ª—É—á—à–∏—Ç—Å—è
- Sharpe Ratio —É–ª—É—á—à–∏—Ç—Å—è

## üîÑ –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

1. **–¢–µ—Å—Ç 1**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ target labeling –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. **–¢–µ—Å—Ç 2**: –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –æ–±—É—á–µ–Ω–∏—è (60 –¥–Ω–µ–π)
3. **–¢–µ—Å—Ç 3**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
4. **–¢–µ—Å—Ç 4**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π
5. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ**: –° —Ç–µ–∫—É—â–∏–º–∏ 1h –º–æ–¥–µ–ª—è–º–∏ –∏ 15m –º–æ–¥–µ–ª—è–º–∏

## ‚ö†Ô∏è –†–ò–°–ö–ò

1. **–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ** - –Ω—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
2. **–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–¥–µ–ª–æ–∫** - –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ
3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π** - –º–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö

## üìÖ –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è target labeling –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –æ–±—É—á–µ–Ω–∏—è

2. **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

3. **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - –£–ª—É—á—à–µ–Ω–∏–µ feature engineering
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
