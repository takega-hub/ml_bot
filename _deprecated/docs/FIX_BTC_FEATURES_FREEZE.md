# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è –∏–∑-–∑–∞ BTC —Ñ–∏—á–µ–π

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ë—ç–∫—Ç–µ—Å—Ç –∑–∞–≤–∏—Å–∞–ª –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ BTC –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∏—á–µ–π. –ü—Ä–∏—á–∏–Ω–∞:
1. **–ú–µ–¥–ª–µ–Ω–Ω—ã–π —Ü–∏–∫–ª** –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ Lead/Lag –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ (`for i in range(len(alt_returns))`)
2. **API –∑–∞–ø—Ä–æ—Å—ã** –∫ BTCUSDT –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `prepare_features_with_df()`
3. **–¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ (14 –¥–Ω–µ–π = ~1344 —Å–≤–µ—á–∏)

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ Lead/Lag –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è

**–ë—ã–ª–æ** (–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ü–∏–∫–ª):
```python
for i in range(len(alt_returns)):
    window_start = max(0, i - 19)
    window_end = i + 1
    alt_window = alt_returns.iloc[window_start:window_end]
    btc_window = btc_lag.iloc[window_start:window_end]
    corr = alt_window.corr(btc_window)
    corr_values.append(corr)
```

**–°—Ç–∞–ª–æ** (vectorized –æ–ø–µ—Ä–∞—Ü–∏—è):
```python
corr_series = alt_returns.rolling(window=20, min_periods=5).corr(btc_lag)
df[f"alt_btc_lag_{lag}_corr"] = corr_series.fillna(0.0)
```

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ**: ~100-1000x –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

### 2. –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã BTC —Ñ–∏—á–∏ –≤ –±—ç–∫—Ç–µ—Å—Ç–µ

BTC —Ñ–∏—á–∏ **–æ—Ç–∫–ª—é—á–µ–Ω—ã** –≤:
- `prepare_features_with_df()` –≤ `strategy_ml.py`
- `build_ml_signals()` –≤ `strategy_ml.py`

**–ü—Ä–∏—á–∏–Ω–∞**: 
- –ú–æ–¥–µ–ª–∏ –µ—â–µ –Ω–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω—ã —Å BTC —Ñ–∏—á–∞–º–∏
- API –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª—è—Ç—å –±—ç–∫—Ç–µ—Å—Ç
- –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ì–¥–µ –æ—Å—Ç–∞–ª–∏—Å—å BTC —Ñ–∏—á–∏**:
- ‚úÖ `add_btc_correlation_features()` –≤ `feature_engineering.py` - –º–µ—Ç–æ–¥ –≥–æ—Ç–æ–≤
- ‚úÖ `retrain_ml_optimized.py` - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏

## üöÄ –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å BTC —Ñ–∏—á–∏ –æ–±—Ä–∞—Ç–Ω–æ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í `retrain_ml_optimized.py` —É–∂–µ –µ—Å—Ç—å –∫–æ–¥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è BTC —Ñ–∏—á–µ–π (–µ—Å–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å).

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–∫–ª—é—á–∏—Ç—å –≤ –±—ç–∫—Ç–µ—Å—Ç–µ

1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤ `strategy_ml.py`:
   - –í `prepare_features_with_df()` (—Å—Ç—Ä–æ–∫–∏ ~428-476)
   - –í `build_ml_signals()` (—Å—Ç—Ä–æ–∫–∏ ~1406-1449)

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω—ã —Å BTC —Ñ–∏—á–∞–º–∏

3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –ø–µ—Ä–∏–æ–¥–µ (1-2 –¥–Ω—è)

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- ‚úÖ –ú–µ—Ç–æ–¥ `add_btc_correlation_features()` –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Lead/Lag –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç vectorized –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚è∏Ô∏è BTC —Ñ–∏—á–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã –≤ –±—ç–∫—Ç–µ—Å—Ç–µ (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å)
- ‚è∏Ô∏è BTC —Ñ–∏—á–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `retrain_ml_optimized.py` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏** —Å BTC —Ñ–∏—á–∞–º–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –ø–µ—Ä–∏–æ–¥–µ
3. **–í–∫–ª—é—á–∏—Ç—å –≤ –±—ç–∫—Ç–µ—Å—Ç–µ** —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- BTC —Ñ–∏—á–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è **–∞–ª—å—Ç–∫–æ–∏–Ω–æ–≤** (–Ω–µ –¥–ª—è BTCUSDT)
- –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º BTCUSDT
- –ú–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç –Ω–∞ ~10-30% (–Ω–æ –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–∞—Ç—å)
