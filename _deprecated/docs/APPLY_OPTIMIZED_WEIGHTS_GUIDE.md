# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤ –∞–Ω—Å–∞–º–±–ª–µ–π

## üìã –û–±–∑–æ—Ä

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–µ—Å–æ–≤ –∞–Ω—Å–∞–º–±–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Sharpe ratio, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –≤–µ—Å–∞ –ø—Ä–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π.

## üîß –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤

–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞:

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å –≤–µ—Å–∞–º–∏
python apply_optimized_weights.py --list

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∞–π–ª —Å –≤–µ—Å–∞–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
python apply_optimized_weights.py

# –ò–ª–∏ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
python apply_optimized_weights.py --weights-file ensemble_weights_all_20260209_022646.json
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `optimized_weights_config.json` —Å –≤–µ—Å–∞–º–∏ –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

## üéØ –®–∞–≥ 2: –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--use-optimized-weights` –ø—Ä–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–∏:

```bash
# –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
python retrain_ml_optimized.py --use-optimized-weights

# –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
python retrain_ml_optimized.py --symbol SOLUSDT --use-optimized-weights

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ —Å –≤–µ—Å–∞–º–∏
python retrain_ml_optimized.py --use-optimized-weights --weights-file ensemble_weights_all_20260209_022646.json

# –ë–µ–∑ MTF —Ñ–∏—á–µ–π
python retrain_ml_optimized.py --no-mtf --use-optimized-weights
```

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Å–æ–≤**: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∞–π–ª `ensemble_weights_all_*.json` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.

2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–µ—Å–æ–≤**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤–µ—Å–∞ –¥–ª—è RF –∏ XGB –º–æ–¥–µ–ª–µ–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—É—Ñ—Ñ–∏–∫—Å—É –º–æ–¥–µ–ª–∏ (`15m` –∏–ª–∏ `mtf`).

3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Å–æ–≤**: 
   - –î–ª—è **WeightedEnsemble** (RF + XGB): –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞ –Ω–∞–ø—Ä—è–º—É—é
   - –î–ª—è **TripleEnsemble** (RF + XGB + LightGBM): RF –∏ XGB –ø–æ–ª—É—á–∞—é—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞ (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ 80%), LightGBM –ø–æ–ª—É—á–∞–µ—Ç –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 20%

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –í–µ—Å–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è.

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É—Ñ—Ñ–∏–∫—Å –º–æ–¥–µ–ª–∏ (`15m` –∏–ª–∏ `mtf`) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å—É –≤ —Ñ–∞–π–ª–µ —Å –≤–µ—Å–∞–º–∏.

2. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤**: –í–µ—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è, —á—Ç–æ–±—ã –∏—Ö —Å—É–º–º–∞ –±—ã–ª–∞ —Ä–∞–≤–Ω–∞ 1.0.

3. **Fallback**: –ï—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è —Å–∏–º–≤–æ–ª–∞, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤–µ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ CV –º–µ—Ç—Ä–∏–∫.

## üìù –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö:

```
[OK] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞: RF=1.000, XGB=0.000
[OK] –ê–Ω—Å–∞–º–±–ª—å —Å–æ–∑–¥–∞–Ω —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
      ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∫–∞–∫: ensemble_SOLUSDT_15_15m.pkl
      üìä –í–µ—Å–∞: RF=1.000, XGB=0.000 (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤

–í–µ—Å–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–∏. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Ö, –∑–∞–≥—Ä—É–∑–∏–≤ –º–æ–¥–µ–ª—å:

```python
from bot.ml.model_trainer import ModelTrainer

trainer = ModelTrainer()
model_data = trainer.load_model("ensemble_SOLUSDT_15_15m.pkl")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Å–∞
training_params = model_data.get('training_params', {})
if training_params.get('optimized_weights'):
    print(f"RF weight: {training_params['rf_weight']}")
    print(f"XGB weight: {training_params['xgb_weight']}")
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª–∏ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ `compare_ml_models.py`
3. –°—Ä–∞–≤–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
4. –í—ã–±–µ—Ä–∏—Ç–µ –ª—É—á—à–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
